<?xml version="1.0" encoding="UTF-8"?>
<odoo>
    <data>

        <record id="product_template_only_form_view" model="ir.ui.view">
            <field name="name">product_template_only_form_view</field>
            <field name="model">product.template</field>
            <field name="inherit_id" ref="product.product_template_form_view" />
            <field name="arch" type="xml">
                <xpath expr="//page[@name='general_information']//group[1]" position="after">
                    <group string="CO2 Settings" name="group_carbon_settings">

                        <field name="carbon_compute_method"/>

                        <label for="carbon_value" />
                        <div class="o_row">
                            <field name="carbon_value" class="oe_inline" attrs="{'readonly': [('carbon_factor_id', '!=', False)]}" force_save="1" />
                            <button type="object"
                                    name="action_see_origin"
                                    icon="fa-question-circle"
                                    context="{'carbon_value_name': 'carbon_value'}"
                                    title="See CO2e value origin"
                                    attrs="{'invisible': [('carbon_factor_id', '!=', False)]}" />
                            <button type="object"
                                    name="action_recompute"
                                    icon="fa-refresh"
                                    context="{'carbon_value_name': 'carbon_value'}"
                                    title="Re-compute CO2e value"
                                    attrs="{'invisible': [('carbon_factor_id', '!=', False)]}"
                                    confirm="Do you really want to auto-compute the value? This could also update some related records." />
                            <span class="oe_inline" style="font-weight: bold">Emission Factor: </span>
                            <field name="carbon_factor_id" class="oe_inline" />
                        </div>
                        <field name="carbon_value_origin" force_save="1" invisible="1" />


                        <label for="carbon_sale_value" />
                        <div class="o_row">
                            <field name="carbon_sale_value" class="oe_inline" attrs="{'readonly': [('carbon_sale_factor_id', '!=', False)]}" force_save="1" />
                            <button type="object"
                                    name="action_see_origin"
                                    icon="fa-question-circle"
                                    context="{'carbon_value_name': 'carbon_sale_value'}"
                                    title="See CO2e value origin"
                                    attrs="{'invisible': [('carbon_sale_factor_id', '!=', False)]}" />
                            <button type="object"
                                    name="action_recompute"
                                    icon="fa-refresh"
                                    context="{'carbon_value_name': 'carbon_sale_value'}"
                                    title="Re-compute CO2e value"
                                    attrs="{'invisible': [('carbon_sale_factor_id', '!=', False)]}"
                                    confirm="Do you really want to auto-compute the value? This could also update some related records." />
                            <span class="oe_inline" style="font-weight: bold">Emission Factor: </span>
                            <field name="carbon_sale_factor_id" class="oe_inline" />
                        </div>
                        <field name="carbon_sale_value_origin" force_save="1" invisible="1" />

                    </group>
                </xpath>
            </field>
        </record>

    </data>
</odoo>
