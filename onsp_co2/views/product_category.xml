<?xml version="1.0" encoding="UTF-8"?>
<odoo>
    <data>

        <record id="view_category_property_form" model="ir.ui.view">
            <field name="name">view_category_property_form</field>
            <field name="model">product.category</field>
            <field name="inherit_id" ref="account.view_category_property_form" />
            <field name="arch" type="xml">
                <xpath expr="//group[@name='account_property']" position="after">
                    <group  string="CO2 Settings" name="group_carbon_settings">

                        <group string="Purchases">
                            <label for="carbon_is_manual" string="Mode" />
                            <div style="display: inline-flex; font-size: 1.15rem;" class="gap-1">
                                <div class="opacity-50 mr-2" attrs="{'invisible': [('carbon_is_manual', '!=', True)]}">Auto</div>
                                <div style="font-weight: bold;" attrs="{'invisible': [('carbon_is_manual', '=', True)]}">Auto</div>

                                <field name="carbon_is_manual" nolabel="1" widget="boolean_toggle" class="" style="margin-left: 8px;"/>
                                <field name="carbon_mode" invisible="1" />

                                <div class="opacity-50" attrs="{'invisible': [('carbon_is_manual', '=', True)]}">Manual</div>
                                <div style="font-weight: bold;" attrs="{'invisible': [('carbon_is_manual', '!=', True)]}">Manual</div>
                            </div>


                            <field name="carbon_compute_method" force_save="1"
                                   attrs="{
                                   'readonly': ['|', ('carbon_is_manual', '!=', True), ('carbon_factor_id', '!=', False)],
                                   'required': [('carbon_is_manual', '=', True)]
                                   }" />

                            <label for="carbon_value" string="Value" />
                            <div class="o_row">
                                <field name="carbon_value" class="oe_inline" force_save="1"
                                   attrs="{
                                   'invisible': [('carbon_compute_method', '=', False)],
                                   'required': [('carbon_compute_method', '!=', False)],
                                   'readonly': ['|', ('carbon_is_manual', '!=', True), ('carbon_factor_id', '!=', False)],
                                   }" />
                                <field name="carbon_currency_label" class="oe_inline" style="color: grey;"
                                        attrs="{'invisible': [('carbon_compute_method', '=', False)]}" />
                                <span class="oe_inline" attrs="{'invisible': [('carbon_compute_method', '=', False)],}">/</span>


                                <field name="carbon_uom_id" class="oe_inline" force_save="1"
                                       attrs="{
                                       'invisible': [('carbon_compute_method', '!=', 'physical')],
                                       'required': [('carbon_compute_method', '=', 'physical')],
                                       'readonly': ['|', ('carbon_is_manual', '!=', True), ('carbon_factor_id', '!=', False)],
                                       }" />
                                <field name="carbon_monetary_currency_id" class="oe_inline" force_save="1"
                                       attrs="{
                                       'invisible': [('carbon_compute_method', '!=', 'monetary')],
                                       'required': [('carbon_compute_method', '=', 'monetary')],
                                       'readonly': ['|', ('carbon_is_manual', '!=', True), ('carbon_factor_id', '!=', False)],
                                       }" />
                            </div>


                            <field name="carbon_factor_id" attrs="{'invisible': [('carbon_is_manual', '!=', True)]}" />
                            <field name="carbon_value_origin" force_save="1" attrs="{'invisible': [('carbon_is_manual', '=', True)]}" />

                        </group>




                        <group string="Sales">
                            <label for="carbon_sale_is_manual" string="Mode" />
                            <div style="display: inline-flex; font-size: 1.15rem;" class="gap-1">
                                <div class="opacity-50 mr-2" attrs="{'invisible': [('carbon_sale_is_manual', '!=', True)]}">Auto</div>
                                <div style="font-weight: bold;" attrs="{'invisible': [('carbon_sale_is_manual', '=', True)]}">Auto</div>

                                <field name="carbon_sale_is_manual" nolabel="1" widget="boolean_toggle" class="" style="margin-left: 8px;"/>
                                <field name="carbon_sale_mode" invisible="1" />

                                <div class="opacity-50" attrs="{'invisible': [('carbon_sale_is_manual', '=', True)]}">Manual</div>
                                <div style="font-weight: bold;" attrs="{'invisible': [('carbon_sale_is_manual', '!=', True)]}">Manual</div>
                            </div>


                            <field name="carbon_sale_compute_method" force_save="1"
                                   attrs="{
                                   'readonly': ['|', ('carbon_sale_is_manual', '!=', True), ('carbon_sale_factor_id', '!=', False)],
                                   'required': [('carbon_sale_is_manual', '=', True)]
                                   }" />

                            <label for="carbon_sale_value" string="Value" />
                            <div class="o_row">
                                <field name="carbon_sale_value" class="oe_inline" force_save="1"
                                   attrs="{
                                   'invisible': [('carbon_sale_compute_method', '=', False)],
                                   'required': [('carbon_sale_compute_method', '!=', False)],
                                   'readonly': ['|', ('carbon_sale_is_manual', '!=', True), ('carbon_sale_factor_id', '!=', False)],
                                   }" />
                                <field name="carbon_currency_label" class="oe_inline" style="color: grey;"
                                        attrs="{'invisible': [('carbon_sale_compute_method', '=', False)]}" />
                                <span class="oe_inline" attrs="{'invisible': [('carbon_sale_compute_method', '=', False)],}">/</span>


                                <field name="carbon_sale_uom_id" class="oe_inline" force_save="1"
                                       attrs="{
                                       'invisible': [('carbon_sale_compute_method', '!=', 'physical')],
                                       'required': [('carbon_sale_compute_method', '=', 'physical')],
                                       'readonly': ['|', ('carbon_sale_is_manual', '!=', True), ('carbon_sale_factor_id', '!=', False)],
                                       }" />
                                <field name="carbon_sale_monetary_currency_id" class="oe_inline" force_save="1"
                                       attrs="{
                                       'invisible': [('carbon_sale_compute_method', '!=', 'monetary')],
                                       'required': [('carbon_sale_compute_method', '=', 'monetary')],
                                       'readonly': ['|', ('carbon_sale_is_manual', '!=', True), ('carbon_sale_factor_id', '!=', False)],
                                       }" />
                            </div>


                            <field name="carbon_sale_factor_id" attrs="{'invisible': [('carbon_sale_is_manual', '!=', True)]}" />
                            <field name="carbon_sale_value_origin" force_save="1" attrs="{'invisible': [('carbon_sale_is_manual', '=', True)]}"/>

                        </group>

                    </group>
                </xpath>
            </field>
        </record>

    </data>
</odoo>
